{% extends "layouts/PINS-post-mvp.html" %}

{% set title = "Interested party comments" %}
{% set pageName = title + ' - Planning Inspectorate'%}

{% set back = true %}

{% set prototypeLinks = [
  {
    href: '?no-comments=yes',
    text: 'No comments to review'
  } if data['no-comments'] != 'yes',
  {
    href: '?no-comments=',
    text: 'Comments to review'
  } if data['no-comments'] == 'yes',
  {
    href: '?comments-shared=yes',
    text: 'Comments shared'
  } if data['comments-shared'] != 'yes',
  {
    href: '?comments-shared=',
    text: 'Comments window is open'
  } if data['comments-shared'] == 'yes',
  {
    href: '?redactedComment=&commentReview=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=',
    text: 'Clear banners'
  }
] %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <!-- Notification banners -->
      {% if data['comments-shared'] != 'yes' %}
        {% if data ['redactedComment'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Comment from Ian Smith redacted and accepted
              </p>
            </div>
          </div>
        {% elseif data ['acceptedComment'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Comment from Ian Smith accepted
                </p>
            </div>
          </div>
      	{% elseif data ['manual-ip-comment'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Comment from {{ data ['manual-ip-first-name'] or 'Sam'}} {{ data ['manual-ip-last-name'] or 'Fisher'}} added
              </p>
            </div>
          </div>
        {% elseif data ['comment-rejected'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Comment from {{ data ['manual-ip-first-name'] or 'Ian'}} {{ data ['manual-ip-last-name'] or 'Smith'}} rejected
              </p>
              <p class="govuk-body">
                The IP has not been informed. No email address was provided.
              </p>
            </div>
          </div>
        {% elseif data ['comment-withdrawn'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Comment from {{ data ['manual-ip-first-name'] or 'Ian'}} {{ data ['manual-ip-last-name'] or 'Smith'}} withdrawn
              </p>
            </div>
          </div>
        {% elseif data ['extra-document'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                Supporting documents uploaded for {{ data ['manual-ip-first-name'] or 'Ian'}} {{ data ['manual-ip-last-name'] or 'Smith'}}
              </p>
            </div>
          </div>
        {% elseif data ['new-comment'] %}
          <div class="govuk-notification-banner  govuk-notification-banner--success" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
              <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
              </h2>
            </div>
            <div class="govuk-notification-banner__content">
              <p class="govuk-notification-banner__heading">
                IP comment from Sam Fisher added
              </p>
            </div>
          </div>
      	{% endif %}
      {% endif %}

      <!-- Page heading -->
      <span class="govuk-caption-l">Appeal 2114328</span>
      <h1 class="govuk-heading-l">
        {{ title }}
      </h1>

      {% set ipFilter %}

        <form method="post">

          {{ govukRadios({
            classes: "govuk-radios--small",
            name: "commentsfilter",
            fieldset: {
              legend: {
                text: "Filter",
                isPageHeading: true,
                classes: "govuk-fieldset__legend--m"
              }
            },
            items: [
              {
                value: "all",
                text: "All"
              },
              {
                value: "awaiting",
                text: "Awaiting"
              },
              {
                value: "valid",
                text: "Valid"
              },
              {
                value: "invalid",
                text: "Invalid"
              }
            ]
          }) }}

          {{ govukButton ({
            text: "Apply",
            classes: "govuk-button--secondary govuk-!-margin-bottom-3"
          }) }}

        </form>

      {% endset -%}

      {{ govukDetails({
        summaryText: "Filter comments",
        html: ipFilter
      }) }}

      {% if data['comments-shared'] != 'yes' %}
        <p class="govuk-body govuk-!-margin-bottom-6">
          <a href="add-ip-name-and-email" class="govuk-link">
            Add IP comment
          </a>
        </p>
      {% endif %}

    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {% if data['comments-shared'] != 'yes' %}

        {% if data['no-comments'] %}

          <p class="govuk-body">
            Awaiting comments
          </p>

        {% else %}

          {{ govukTable({
            caption: "Awaiting review",
            captionClasses: "govuk-table__caption--m govuk-visually-hidden",
            firstCellIsHeader: false,
            head: [
              {
                text: "Interested party"
              },
              {
                text: "Status"
              },
              {
                text: "Submitted"
              },
              {
                text: "Action"
              }
            ],
            rows: [
              [
                  {
                    text: "Sam Fisher"
                  },
                  {
                    text: "Awaiting"
                  },
                  {
                    text: 2 | daysAgo
                  },
                  {
                    html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=true&comment-rejected=&extra-document=&new-comment=&documents-added=&comment-type=doc'>Review<span class='govuk-visually-hidden'> comment from Sam Fisher</span></a>"
                  }
              ] if data['manually-added-comment'] == 'true' and (data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting'),
              [
                  {
                    text: "Ian Smith"
                  },
                  {
                    text: "Awaiting"
                  },
                  {
                    text: 3 | daysAgo
                  },
                  {
                    html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=&documents-added='>Review<span class='govuk-visually-hidden'> comment from Ian Smith</span></a>"
                  }
              ] if data['commentReview'] != 'true' and (data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting'),
              [
                {
                    text: "Robyn Jenkins"
                },
                {
                  text: "Awaiting"
                },
                {
                  text: 3 | daysAgo
                },
                {
                  html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=&documents-added='>Review<span class='govuk-visually-hidden'> comment from Robyn Jenkins</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting',
              [
                {
                  text: "Cath Fairfield"
                },
                {
                  text: "Awaiting"
                },
                {
                  text: 4 | daysAgo
                },
                {
                  html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=&documents-added='>Review<span class='govuk-visually-hidden'> comment from Cath Fairfield</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting',
              [
                {
                  text: "Brian Thompson"
                },
                {
                  text: "Awaiting"
                },
                {
                  text: 7 | daysAgo
                },
                {
                  html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=&documents-added='>Review<span class='govuk-visually-hidden'> comment from Brian Thompson</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting',
              [
                {
                  text: "Dan Brighthouse"
                },
                {
                  text: "Awaiting"
                },
                {
                  text: 8 | daysAgo
                },
                {
                  html: "<a href='comment-review?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document=&new-comment=&documents-added='>Review<span class='govuk-visually-hidden'> comment from Dan Brighthouse</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'awaiting',
              [
                {
                  text: "Ian Smith"
                },
                {
                  text: "Valid"
                },
                {
                  html: 0 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Ian Smith</span></a>"
                }
              ] if data['commentReview'] == 'true' and (data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid'),
              [
                {
                  text: "Hadlee Franklin"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Hadley Franklin</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Simon Curtis"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Simon Curtis</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Alexis Sosa"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Alexis Sosa</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Emir Salazar"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Emir Salazar</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Freya Gutierrez"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Freya Gutierrez</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Luca Bond"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Luca Bond</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Alena Arroyo"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Alena Arroyo</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Remi Le"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Kayden West"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Hamza Barron"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Dior Phelps"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Franklin Rasmussen"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Eleanor Griffith"
                },
                {
                  text: "Valid"
                },
                {
                  text: 2 | daysAgo
                },
                {
                  html: "<a href='comment-view?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from (full name)</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'valid',
              [
                {
                  text: "Davina Twinee"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 12 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Davina Twinee</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',
              [
                {
                  text: "Abrabella Deschamps"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 13 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Abrabella Deschamps</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',
              [
                {
                  text: "Caleb Graves"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 18 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Caleb Graves</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',
              [
                {
                  text: "Francesca Christian"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 32 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Francesca Christian</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',

              [
                {
                  text: "Emmalyn Whitaker"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 37 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Emmalyn Whitaker</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',
              [
                {
                  text: "Naya Carey"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 37 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Naya Carey</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid',
              [
                {
                  text: "Bowen McConnell"
                },
                {
                  text: "Invalid"
                },
                {
                  text: 38 | daysAgo
                },
                {
                  html: "<a href='comment-view-rejected?acceptedComment=&redactedComment=&comment-withdrawn=&manual-ip-comment=&comment-rejected=&extra-document='>View<span class='govuk-visually-hidden'> comment from Bowen McConnell</span></a>"
                }
              ] if data['commentsfilter'] == 'all' or data['commentsfilter'] == 'invalid'

            ]
          }) }}

          {% if data['commentsfilter'] == 'all' %}
            {{ govukPagination({
              previous: {
                href: "#"
              },
              next: {
                href: "#"
              },
              items: [
                {
                  number: 1,
                  current: true,
                  href: "#"
                },
                {
                  number: 2,
                  href: "#"
                },
                {
                  number: 3,
                  href: "#"
                }
              ]
            }) }}

          {% endif %}

        {% endif %}

        <p class="govuk-body">
          <a href="withdrawn-comments">
            Withdrawn IP comments
          </a>
        </p>

      {% else %}
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% include "includes/ip-comments/shared-comments.html" %}
      {% endif %}

    </div>
  </div>
{% endblock %}
