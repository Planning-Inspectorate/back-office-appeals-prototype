{% extends "layouts/PINS.html" %}

{% set pageName="Appellant Case" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <!-- notifications -->
    {% include "/elements/includes/case-details/notifications.html" %}

  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <!--	<span class="govuk-caption-l">Appeal 2110166</span> -->
    <span class="govuk-caption-xl">Appeal 2114328</span>
  	<h1 class="govuk-heading-xl govuk-!-margin-bottom-2">
      {{ title }}
    </h1>

    {% include "/elements/includes/case-details/status.html" %}

    {% include "/elements/includes/case-details/meta-data.html" %}

    <p class="govuk-body">
      <a href="#" class="govuk-link">
        Download case
      </a>
    </p>

    {% include "/elements/includes/case-details/case-notes.html" %}

    <!-- case sections -->
    <section class="govuk-!-margin-top-6">

      {% include "/elements/includes/case-details/overview.html" %}

      {% include "/elements/includes/case-details/timetable.html" %}

      {% include "/elements/includes/case-details/site.html" %}

      <!-- only show the Hearing section if -->
      <!-- the case is started and the procedure is a hearing -->

      {% if data['procedure'] == 'hearing' and data['case'] == 'started' %}
        {% include "/elements/includes/case-details/hearing.html" %}
      {% endif %}

      {% include "/elements/includes/case-details/documentation.html" %}

      {% include "/elements/includes/case-details/costs.html" %}

      {% include "/elements/includes/case-details/contacts.html" %}

      {% include "/elements/includes/case-details/team.html" %}

      <!-- show the cancel appeal option -->
      <!-- when the case is started but not decided -->

	<!-- case management table -->
	 <h2 class="govuk-heading-l">
  Case management
</h2>

{% from "govuk/components/table/macro.njk" import govukTable %}

{% set crossTeamFilesHtml %}
  {% if data.uploadedFiles and data.uploadedFiles.length > 0 %}
    {% for file in data.uploadedFiles %}
      <a class="govuk-link" href="#">{{ file.name }}</a>{% if not loop.last %}<br>{% endif %}
    {% endfor %}
  {% else %}
    No documents
  {% endif %}
{% endset %}

{% set crossTeamActionHtml %}
  {% if data.uploadedFiles and data.uploadedFiles.length > 0 %}
    <a href="/projects/file-upload/v5/manage-documents">Manage<span class="govuk-visually-hidden"> cross-team correspondence</span></a> | <a href="/projects/file-upload/v5/file-upload">Add<span class="govuk-visually-hidden"> cross-team correspondence</span></a>
  {% else %}
    <a href="/projects/file-upload/v5/file-upload">Add<span class="govuk-visually-hidden"> cross-team correspondence</span></a>
  {% endif %}
{% endset %}


<div class="pins-panel">

  {{ govukTable({
    captionClasses: "govuk-table__caption--m",
    firstCellIsHeader: true,
    rows: [
      [
        {
          text: "Cross-team correspondence",
          classes: "govuk-!-width-one-third"
        },
        {
          html: crossTeamFilesHtml
        },
        {
          html: crossTeamActionHtml,
          format: "numeric"
        }
      ],
      [
        {
          text: "Inspector correspondence"
        },
        {
          text: "No documents"
        },
        {
          html: "<a href='#'>Add<span class='govuk-visually-hidden'> Inspector correspondence</span></a>",
          format: "numeric"
        }
      ],
      [
        {
          text: "Main party correspondence"
        },
        {
          text: "No documents"
        },
        {
          html: "<a href='#'>Add<span class='govuk-visually-hidden'> appeal withdrawal</span></a>",
          format: "numeric"
        }
      ],
      [
        {
          text: "Case history"
        },
        {
          text: ""
        },
        {
          html: "<a href='case-history'>View<span class='govuk-visually-hidden'> case history</span></a>",
          format: "numeric"
        }
      ],
      [
        {
          text: "Reopen this case"
        },
        {
          html: "<a href='reopen-reason'>Reopen<span class='govuk-visually-hidden'> case</span></a>",
          format: "numeric"
        }
      ] if data['case-stage'] == 'complete'
    ]
  }) }}

</div>


      {% if data['case'] == 'started' and data['case-stage'] != 'complete' %}
        {% include "/elements/includes/case-details/cancel-appeal.html" %}
      {% endif %}

    </section>


  </div>
</div>
{% endblock %}
