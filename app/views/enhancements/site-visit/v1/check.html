{% extends "layouts/bo.html" %}

{% set title = "Check details and set up site visit" %}
{% set pageName = title %}

{% set back = true %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <span class="govuk-caption-l">Appeal 6021709</span>
      <h1 class="govuk-heading-l">{{ title }}</h1>

      {# Check if user entered both date + time #}
      {% set hasDate = data.setupVisit.visitDate.day and data.setupVisit.visitDate.month and data.setupVisit.visitDate.year %}
      {% set hasTime = data.setupVisit.visitTime.hour and data.setupVisit.visitTime.minute %}
      {% set hasDateOrTime = hasDate or hasTime %}

      {# Format the visit date if entered #}
      {% if hasDate %}
        {% set visitDate = data.setupVisit.visitDate | isoDateFromDateInput | govukDate %}
      {% endif %}

      {# Format the visit time if entered #}
      {% if hasTime %}
        {% set visitTime = data.setupVisit.visitTime.hour ~ ":" ~ data.setupVisit.visitTime.minute %}
      {% endif %}

      {# Build rows dynamically #}
      {% set rows = [
        {
          key: { text: "Type" },
          value: { text: data.setupVisit.type or "Accompanied" },
          actions: {
            items: [
              { href: "visit-type", text: "Change", visuallyHiddenText: "visit type" }
            ]
          }
        },
        {
          key: { text: "Do you know the date and time of the site visit?" },
          value: { text: "No" },
          actions: {
            items: [
              { href: "date-and-time-check", text: "Change", visuallyHiddenText: "date abd time check" }
            ]
          }
        }
      ] %}

      {{ govukSummaryList({ rows: rows }) }}

    
      <form method="post">
        {{ govukButton({
          text: "Set up site visit"
        }) }}
      </form>
    </div>
  </div>
{% endblock %}
