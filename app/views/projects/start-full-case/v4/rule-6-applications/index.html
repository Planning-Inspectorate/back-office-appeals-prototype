{% extends "layouts/PINS-Simple.html" %}

{% set title = "Rule 6 status applications" %}
{% set title = "Rule 6 parties" %}
{% set pageName = title %}

{% block beforeContent %}
  {{ govukBreadcrumbs({
    classes: 'govuk-!-margin-top-4 govuk-!-margin-bottom-0',
      items: [
        {
          text: "Appeal 12345",
          href: "/projects/start-full-case/v4/case-details"
        },
        {
          text: title
        }
      ]
    }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {{ govukNotificationBanner({
        type: "success",
        text: flash
      }) if flash.length }}

      <span class="govuk-caption-l">Appeal 2114328</span>
      <h1 class="govuk-heading-l">{{title}}</h1>

      {# <p class="govuk-!-margin-bottom-6"><a class="govuk-link" href="/projects/start-full-case/v4/rule-6-applications/new">Add Rule 6 status application</a></p> #}
      <p class="govuk-!-margin-bottom-6"><a class="govuk-link" href="/projects/start-full-case/v4/rule-6-applications/new">Add Rule 6 party</a></p>

      {% set tab1Html %}
         {% include "../_includes/rule6-applications/awaiting-review.html" %}
      {% endset %}

      {% set tab2Html %}
        {% include "../_includes/rule6-applications/invited.html" %}
      {% endset %}

      {% set tab3Html %}
        {% include "../_includes/rule6-applications/accepted.html" %}
      {% endset %}

      {% set tab4Html %}
        {% include "../_includes/rule6-applications/rejected.html" %}
      {% endset %}

      {{ govukTabs({
        items: [
          {
            label: "Awaiting review",
            id: "tab-1",
            panel: {
              html: tab1Html
            }
          },
          {
            label: "Invited",
            id: "tab-2",
            panel: {
              html: tab2Html
            }
          },
          {
            label: "Accepted",
            id: "tab-3",
            panel: {
              html: tab3Html
            }
          },
          {
            label: "Rejected",
            id: "tab-4",
            panel: {
              html: tab4Html
            }
          }
        ]
      }) if 1==2}}

      <div class="app-list">
        {% for item in allParties %}
          <div class="app-list__item">
            <h2 class="govuk-heading-s govuk-!-margin-bottom-1">
              <a class="govuk-link--no-visited-state" href="/projects/start-full-case/v4/rule-6-applications/{{item.id}}">{{item.firstName}} {{item.lastName}}
              </a>
              {% if item.hasOrganisation %}<span class="app-list__org govuk-!-font-size-16 govuk-hint govuk-!-margin-bottom-0">{{item.organisationName}}</span>{% endif %}
            </h2>

            {{ govukTag({
              text: item.status,
              classes: "app-list__tag " + (item.status | rule6StatusColour)
            }) }}
          </div>
        {% endfor %}
      </div>


      {# <p><a class="govuk-link" href="#">Withdrawn Rule 6 status applications</a></p> #}

    </div>
  </div>
{% endblock %}
