{% extends "layouts/bo.html" %}

{% set title = 'Check details and mark appeal as valid' %}
{% set pageName = title %}

{% block beforeContent %}
{{ govukBackLink({
text: "Back",
href: 'javascript:history.back()'
}) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">

    <span class="govuk-caption-l">Appeal {{ data['appealReference'] or '1223443' }}</span>
    <h1 class="govuk-heading-l">{{ title }}</h1>

    {% set groundAbarred %}
    {% if data['groundA'] in ['Yes', 'No'] %}
      {{ data['groundA'] }}
      {% else %}
         Yes
      {% endif %}
    {% endset %}

    {# Default to No #}
    {% set otherInformation = "No" %}
    
    {% if data['otherInfo'] == "Yes" %}
      {% if data['otherInfoText'] %}
        {% set otherInformation = "Yes: " + data['otherInfoText'] %}
      {% else %}
        {% set otherInformation = "Yes" %}
      {% endif %}
    {% endif %}

    {{ govukSummaryList({
      rows: [
        {
          key: {
            text: "Review decision"
          },
          value: {
            text: "Valid"
          },
          actions: {
            items: [
              {
                href: "enforcement-appeal",
                text: "Change",
                visuallyHiddenText: "review decision"
              }
            ]
          }
        },
        {
          key: {
            text: "Do you want to add any other information?"
          },
          value: {
            text: otherInformation
          },
          actions: {
            items: [
              {
                href: "other-information-valid",
                text: "Change",
                visuallyHiddenText: "other information"
              }
            ]
          }
        },
        {
          key: {
            text: "Valid date for case"
          },
          value: {
            text: "14 November 2025"
          },
          actions: {
            items: [
              {
                href: "valid-date",
                text: "Change",
                visuallyHiddenText: "valid date for case"
              }
            ]
          }
        }
      ]
    }) }}



    {# --- Email previews --- #}

      {{ govukDetails({
        summaryText: "Preview email to appellant",
        html: '
          <div class="app-email-preview">
            <div class="app-email-preview__subject">
              Subject: Your appeal is valid: ' ~ (data["appealReference"] or "1223443") ~ '
            </div>
            <div class="app-email-preview__body">

              <p class="govuk-body">We have reveiwed your appeal and you have submitted all of the information we need.</p>

              <h2 class="govuk-heading-m">Other information</h2>

              <p class="govuk-body">The appeal is ground (a) barred so here is my additional information about that too...</p>

              <h2 class="govuk-heading-m">Give feedback</h2>

              <p class="govuk-body"><a href="https://forms.office.com/pages/responsepage.aspx?id=mN94WIhvq0iTIpmM5VcIjYt1ax_BPvtOqhVjfvzyJN5UOUlNRkhaQjNXTDQyNEhSRExNOFVGSkNJTS4u&route=shorturl">Give feedback on the appeals service</a> (takes 2 minutes)</p>
              <p class="govuk-body">Planning Inspectorate</p>
              <p class="govuk-body"><a href="mailto:caseofficers@planninginspectorate.gov.uk">caseofficers@planninginspectorate.gov.uk</a></p>
            </div>
          </div>'
      }) }}

       <p class="govuk-body">
      We will mark the appeal as valid and send an email to the relevant parties.
    </p>
    <form method="post">
      {{ govukButton({ text: "Mark appeal as valid" }) }}
    </form>

  </div>
</div>
{% endblock %}
